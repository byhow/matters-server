directive @cacheControl(maxAge: Int, scope: CacheScope) on OBJECT | FIELD | FIELD_DEFINITION

directive @uncacheViewer on FIELD_DEFINITION

directive @cost(multipliers: [String], useMultipliers: Boolean, complexity: CostComplexity) on OBJECT | FIELD_DEFINITION

directive @authenticate(requires: Role = user) on OBJECT | FIELD_DEFINITION

directive @authorize(requires: Role = admin) on OBJECT | FIELD_DEFINITION

directive @private on FIELD_DEFINITION

input AppreciateArticleInput {
  id: ID!
  amount: Int!
}

input ArchiveArticleInput {
  id: ID!
}

"""
This type contains metadata, content, hash and related data of an article. If you
want information about article's comments. Please check Comment type.
"""
type Article implements Node {
  """Unique ID of this article"""
  id: ID!

  """The number represents how popular is this article."""
  topicScore: Int

  """Slugified article title."""
  slug: String!

  """Time of this article was created."""
  createdAt: DateTime!

  """State of this article."""
  state: ArticleState!

  """This value determines if this article is accessible to visitors."""
  public: Boolean!

  """This value determines if this article is under Subscription or not."""
  live: Boolean!

  """Author of this article."""
  author: User!

  """Article title."""
  title: String!

  """Article cover's link."""
  cover: URL

  """A short summary for this article."""
  summary: String!

  """Tags attached to this article."""
  tags: [Tag!]

  """Word count of this article."""
  wordCount: Int

  """IPFS hash of this article."""
  dataHash: String

  """Media hash, composed of cid encoding, of this article."""
  mediaHash: String

  """Content of this article."""
  content: String!

  """List of articles which added this article into their collections."""
  collectedBy(input: ConnectionArgs!): ArticleConnection!

  """List of articles added into this articles' collection."""
  collection(input: ConnectionArgs!): ArticleConnection!

  """Related articles to this articles."""
  relatedArticles(input: ConnectionArgs!): ArticleConnection!

  """MAT recieved for this article """
  MAT: Int!
  participantCount: Int! @deprecated(reason: "not used")
  participants: UserConnection! @deprecated(reason: "not used")

  """Subscribers of this articles."""
  subscribers(input: ConnectionArgs!): UserConnection!

  """Appreciators of this articles."""
  appreciators(input: ConnectionArgs!): UserConnection!

  """Total count of this article's appreciations."""
  appreciatorCount: Int! @deprecated(reason: "Use `appreciators.totalCount`.")

  """Limit the nuhmber of appreciate per user."""
  appreciateLimit: Int!

  """Number represents how many times per user can appreciate this article."""
  appreciateLeft: Int!

  """This value determines if current viewer has appreciated or not."""
  hasAppreciate: Boolean!

  """This value determines if current Viewer has subscribed of not."""
  subscribed: Boolean!

  """
  This value determines if this article is an author selected article or not.
  """
  sticky: Boolean!

  """OSS"""
  oss: ArticleOSS!
  remark: String

  """The counting number of comments."""
  commentCount: Int!

  """The number determines how many pinned comments can be set."""
  pinCommentLimit: Int!

  """The number determines how many comments can be set as pinned comment."""
  pinCommentLeft: Int!

  """List of pinned comments."""
  pinnedComments: [Comment!]

  """List of comments of this article."""
  comments(input: CommentsInput!): CommentConnection!

  """The counting number of this article."""
  responseCount: Int!

  """List of responses of a article."""
  responses(input: ResponsesInput!): ResponseConnection!
}

type ArticleConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [ArticleEdge!]
}

type ArticleEdge {
  cursor: String!
  node: Article!
}

input ArticleInput {
  mediaHash: String
  uuid: UUID
}

"""
This notice type contains info about current user has been mentioned in an article.
"""
type ArticleMentionedYouNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user who mentioned current user."""
  actor: User!

  """The article that current user has been mentioned in."""
  target: Article
}

"""
This notice type contains info about current user's article has been appreciated by others.
"""
type ArticleNewAppreciationNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """List of users who appreciated current user's article."""
  actors: [User]

  """The article that has been appreciated."""
  target: Article

  """The amount of appreciations."""
  MAT: Int!
}

"""
This notice type contains info about current user's article has been collected by others.
"""
type ArticleNewCollectedNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user collect current user's articles."""
  actor: User!

  """The article that collected current user's articles."""
  collection: Article

  """The article that has been collected."""
  target: Article
}

"""
This notice type contains info about current user's article has new comment.
"""
type ArticleNewCommentNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user who comment current user's article."""
  actors: [User]

  """The article that has new comment."""
  target: Article

  """The comment data."""
  comment: Comment
}

type ArticleNewDownstreamNotice implements Notice {
  id: ID!
  unread: Boolean!
  createdAt: DateTime!
  actors: [User]
  downstream: Article
  target: Article
}

"""
This notice type contains info about current user's article has been subscribed by others.
"""
type ArticleNewSubscriberNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """List of users who subscribed current user's article."""
  actors: [User]

  """The article that has been subscribed."""
  target: Article
}

type ArticleOSS {
  boost: NonNegativeFloat!
  score: NonNegativeFloat!
  inRecommendToday: Boolean!
  inRecommendIcymi: Boolean!
  inRecommendHottest: Boolean!
  inRecommendNewest: Boolean!
  todayCover: String
  todayTitle: String
  todaySummary: String
}

"""
This notice type contains info about current user's article publihsed successfully.
"""
type ArticlePublishedNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The article that has been published."""
  target: Article
}

input ArticlesInput {
  public: Boolean
  after: String
  first: Int
}

"""Enums for an article state."""
enum ArticleState {
  active
  archived
  banned
}

"""This type contains type, link and related data of an asset."""
type Asset {
  """Unique ID of this Asset."""
  id: ID!

  """Types of this asset."""
  type: AssetType!

  """Link of this asset."""
  path: String!

  """Time of this asset was created."""
  createdAt: DateTime!
}

"""Enums for asset types."""
enum AssetType {
  avatar
  cover
  audiodraft
  report
  feedback
  embed
  embedaudio
  profileCover
}

type Audiodraft {
  id: ID!
  authorId: ID!
  title: String
  audio: URL!
  length: Int!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type AudiodraftConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [AudiodraftEdge!]
}

type AudiodraftEdge {
  cursor: String!
  node: Audiodraft!
}

input AuthorsFilter {
  random: Boolean
  followed: Boolean
}

input AuthorsInput {
  after: String
  first: Int
  oss: Boolean
  filter: AuthorsFilter
}

type AuthResult {
  auth: Boolean!
  token: String @deprecated(reason: "Use cookie for auth.")
}

type Badge {
  type: BadgeType!
}

enum BadgeType {
  seed
}

enum BoostTypes {
  Article
  User
  Tag
}

enum CacheScope {
  PUBLIC
  PRIVATE
}

type Category {
  id: ID!
  name: String!
}

input ChangeEmailInput {
  oldEmail: Email!
  oldEmailCodeId: ID!
  newEmail: Email!
  newEmailCodeId: ID!
}

enum ChannelType {
  appStore
  googlePlay
}

input ClearReadHistoryInput {
  id: ID!
}

"""
This type contains content, author, descendant comments and related data of a comment.
"""
type Comment implements Node {
  """Unique ID of this comment."""
  id: ID!

  """State of this comment."""
  state: CommentState!

  """Time of this comment was created."""
  createdAt: DateTime!

  """Article that the comment is belonged to."""
  article: Article!

  """Content of this comment."""
  content: String

  """Author of this comment."""
  author: User!

  """This value determines this comment is pinned or not."""
  pinned: Boolean!

  """The counting number of upvotes."""
  upvotes: Int!

  """The counting number of downvotes."""
  downvotes: Int!

  """The value determines current user's vote."""
  myVote: Vote
  mentions: [User!] @deprecated(reason: "not used")

  """Descendant comments of this comment."""
  comments(input: CommentCommentsInput!): CommentConnection!

  """Parent comment of this comment."""
  parentComment: Comment
  quotationStart: Int
  quotationEnd: Int
  quotationContent: String

  """A Comment that this comment replied to."""
  replyTo: Comment
  remark: String
}

input CommentCommentsInput {
  author: ID
  sort: CommentSort
  after: String
  first: Int
}

type CommentConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [CommentEdge!]
}

type CommentEdge {
  cursor: String!
  node: Comment!
}

input CommentInput {
  content: String!
  quotationStart: Int
  quotationEnd: Int
  quotationContent: String
  replyTo: ID
  articleId: ID!
  parentId: ID
  mentions: [ID!]
}

type CommentMentionedYouNotice implements Notice {
  id: ID!
  unread: Boolean!
  createdAt: DateTime!
  actor: User!
  target: Comment
}

"""
This notice type contains info about current user's comment has new reply.
"""
type CommentNewReplyNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user who replied current user's comment."""
  actors: [User]

  """The comment that has new replied."""
  target: Comment

  """The comment that replied to current user's existing comment."""
  reply: Comment
}

"""
The notice type contains info about current user's comment has new vote.
"""
type CommentNewUpvoteNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user who vote current user's comment."""
  actors: [User]

  """The comment that has new vote."""
  target: Comment
}

"""
This notice type contains info about current user's comment has been pinned.
"""
type CommentPinnedNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user who pinned current user's comment."""
  actor: User!

  """The comment data."""
  target: Comment
}

input CommentsFilter {
  parentComment: ID
  state: CommentState
  author: ID
}

input CommentsInput {
  sort: CommentSort
  after: String
  before: String
  includeAfter: Boolean
  includeBefore: Boolean
  first: Int
  filter: CommentsFilter
}

"""Enums for sorting comments by time."""
enum CommentSort {
  oldest
  newest
  upvotes @deprecated(reason: "not used")
}

"""Enums for comment state."""
enum CommentState {
  active
  archived
  banned
}

input ConfirmVerificationCodeInput {
  email: Email!
  type: VerificationCodeType!
  code: String!
}

interface Connection {
  totalCount: Int!
  pageInfo: PageInfo!
}

input ConnectionArgs {
  after: String
  first: Int
  oss: Boolean
}

input CostComplexity {
  min: Int = 1
  max: Int
}

scalar Date

scalar DateTime

input DeleteAudiodraftInput {
  id: ID!
}

input DeleteCommentInput {
  id: ID!
}

input DeleteDraftInput {
  id: ID!
}

input DeleteTagsInput {
  ids: [ID!]!
}

type DownstreamArticleArchivedNotice implements Notice {
  id: ID!
  unread: Boolean!
  createdAt: DateTime!
  downstream: Article
  target: Article
}

"""
This type contains content, collections, assets and related data of a draft.
"""
type Draft implements Node {
  """Unique ID of this draft."""
  id: ID!

  """Collection list of this draft."""
  collection(input: ConnectionArgs!): ArticleConnection!

  """Draft title."""
  title: String

  """Slugified draft title."""
  slug: String!

  """Summary of this draft."""
  summary: String

  """Content of this draft."""
  content: String
  scheduledAt: DateTime

  """Time of this draft was created."""
  createdAt: DateTime!

  """Last time of this draft was upadted."""
  updatedAt: DateTime!

  """The counting number of words in this draft."""
  wordCount: Int!

  """Tags are attached to this draft."""
  tags: [String!]

  """Draft's cover link."""
  cover: URL

  """State of draft during publihsing."""
  publishState: PublishState!

  """List of asstets are belonged to this draft."""
  assets: [Asset!]!
}

type DraftConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [DraftEdge!]
}

type DraftEdge {
  cursor: String!
  node: Draft!
}

scalar Email

enum EntityType {
  article
  draft
  user
}

input FeedbackInput {
  category: ID!
  description: String
  assetIds: [ID!]
  contact: String
}

input FollowUserInput {
  id: ID!
}

input FrequentSearchInput {
  key: String
  first: Int
}

input ImportArticlesInput {
  platform: String
  token: String
}

"""# TODO: remove in OSS"""
type Invitation {
  id: ID!
  user: User
  email: String
  accepted: Boolean!
  createdAt: DateTime!
}

"""# TODO: remove in OSS"""
type InvitationConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [InvitationEdge!]
}

"""# TODO: remove in OSS"""
type InvitationEdge {
  cursor: String!
  node: Invitation!
}

"""# TODO: remove in OSS"""
type InvitationStatus {
  reward: String

  """invitation number left"""
  left: Int

  """invitations sent"""
  sent(input: ConnectionArgs!): InvitationConnection
}

scalar JSON

input LogRecordInput {
  type: LogRecordTypes!
}

enum LogRecordTypes {
  ReadFolloweeArticles
  ReadResponseInfoPopUp
}

type MAT {
  total: Int!
  history(input: ConnectionArgs!): TransactionConnection!
}

input MergeTagsInput {
  ids: [ID!]!
  content: String!
}

type Mutation {
  """Publish an article onto IPFS."""
  publishArticle(input: PublishArticleInput!): Draft!

  """Archive an article and users won't be able to view this article."""
  archiveArticle(input: ArchiveArticleInput!): Article!

  """Subscribe an artcile."""
  subscribeArticle(input: SubscribeArticleInput!): Article!

  """Unsubscribe an article."""
  unsubscribeArticle(input: UnsubscribeArticleInput!): Article!

  """Report an article to team."""
  reportArticle(input: ReportArticleInput!): Boolean

  """Appreciate an article."""
  appreciateArticle(input: AppreciateArticleInput!): Article!

  """Read an article."""
  readArticle(input: ReadArticleInput!): Article!

  """Recall while publishing."""
  recallPublish(input: RecallPublishInput!): Draft!

  """Set collection of an article."""
  setCollection(input: SetCollectionInput!): Article!

  """Update article information."""
  updateArticleInfo(input: UpdateArticleInfoInput!): Article!

  """OSS"""
  toggleArticleLive(input: ToggleArticleLiveInput!): Article!
  toggleArticlePublic(input: ToggleArticlePublicInput!): Article!
  toggleArticleRecommend(input: ToggleArticleRecommendInput!): Article!
  updateArticleState(input: UpdateArticleStateInput!): Article!
  deleteTags(input: DeleteTagsInput!): Boolean
  renameTag(input: RenameTagInput!): Tag!
  mergeTags(input: MergeTagsInput!): Tag!
  updateMattersToday(input: UpdateMattersTodayInput!): Article!

  """Publish a comment."""
  putComment(input: PutCommentInput!): Comment!

  """Pin a comment."""
  pinComment(input: PinCommentInput!): Comment!

  """Unpin a comment."""
  unpinComment(input: UnpinCommentInput!): Comment!

  """Remove a comment."""
  deleteComment(input: DeleteCommentInput!): Comment!

  """Report a comment to team."""
  reportComment(input: ReportCommentInput!): Boolean

  """Upvote or downvote a comment."""
  voteComment(input: VoteCommentInput!): Comment!

  """Unvote a comment."""
  unvoteComment(input: UnvoteCommentInput!): Comment!

  """Update a comment's state."""
  updateCommentState(input: UpdateCommentStateInput!): Comment!
  putAudiodraft(input: PutAudiodraftInput!): Audiodraft!
  deleteAudiodraft(input: DeleteAudiodraftInput!): Boolean

  """Create or update a draft."""
  putDraft(input: PutDraftInput!): Draft!

  """Remove a draft."""
  deleteDraft(input: DeleteDraftInput!): Boolean

  """Mark all received notices as read."""
  markAllNoticesAsRead: Boolean

  """Upload a single file."""
  singleFileUpload(input: SingleFileUploadInput!): Asset!

  """Delete a uploaded file."""
  singleFileDelete(input: SingleFileDeleteInput!): Boolean!
  feedback(input: FeedbackInput!): Boolean
  setBoost(input: SetBoostInput!): Node!
  putRemark(input: PutRemarkInput!): String

  """Add specific user behavior record."""
  logRecord(input: LogRecordInput!): Boolean

  """Send verification code for email."""
  sendVerificationCode(input: SendVerificationCodeInput!): Boolean

  """Confirm verification code from email."""
  confirmVerificationCode(input: ConfirmVerificationCodeInput!): ID!

  """Reset user password."""
  resetPassword(input: ResetPasswordInput!): Boolean

  """Change user email."""
  changeEmail(input: ChangeEmailInput!): Boolean

  """Verify user email."""
  verifyEmail(input: VerifyEmailInput!): Boolean

  """Register user."""
  userRegister(input: UserRegisterInput!): AuthResult!

  """Login user."""
  userLogin(input: UserLoginInput!): AuthResult!

  """Logout user."""
  userLogout: Boolean!

  """Update user information."""
  updateUserInfo(input: UpdateUserInfoInput!): User!

  """Update user notification settings."""
  updateNotificationSetting(input: UpdateNotificationSettingInput!): User!

  """Follow a given user."""
  followUser(input: FollowUserInput!): User!

  """Unfollow curent user."""
  unfollowUser(input: UnfollowUserInput!): User!

  """Clear read history for user."""
  clearReadHistory(input: ClearReadHistoryInput!): Boolean

  """Clear search history for user."""
  clearSearchHistory: Boolean

  """Update state of a user, used in OSS."""
  updateUserState(input: UpdateUserStateInput!): User!
}

scalar NegativeFloat

scalar NegativeInt

interface Node {
  id: ID!
}

input NodeEditedInput {
  id: ID!
}

input NodeInput {
  id: ID!
}

scalar NonNegativeFloat

scalar NonNegativeInt

scalar NonPositiveFloat

scalar NonPositiveInt

"""This interface contains common fields of a notice."""
interface Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!
}

type NoticeConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [NoticeEdge!]
}

type NoticeEdge {
  cursor: String!
  node: Notice!
}

type NotificationSetting {
  enable: Boolean!
  email: Boolean!
  mention: Boolean!
  follow: Boolean!
  comment: Boolean!
  appreciation: Boolean!
  articleSubscription: Boolean!
  commentSubscribed: Boolean!
  downstream: Boolean!
  commentPinned: Boolean!
  commentVoted: Boolean!

  """walletUpdate: Boolean!"""
  officialNotice: Boolean!
  reportFeedback: Boolean!
}

enum NotificationSettingType {
  enable
  email
  mention
  follow
  comment
  appreciation
  articleSubscription
  commentSubscribed
  downstream
  commentPinned
  commentVoted
  officialNotice
  reportFeedback
}

"""This type contains system-wise settings."""
type Official {
  reportCategory: [Category!]!
  feedbackCategory: [Category!]!
  releases(input: ReleasesInput!): [Release!]

  """Links of specific pages on Matters site."""
  links: OfficialLinks!
  placements: Placements!
}

"""The notice type contains info about official announcement."""
type OfficialAnnouncementNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The message content."""
  message: String!

  """The link to a specific page if provided."""
  link: URL
}

type OfficialLinks {
  beginnerGuide: URL!
  userGuide: URL!
  about: URL!
  faq: URL!
  tos: URL!
}

type OSS {
  users(input: ConnectionArgs!): UserConnection!
  articles(input: ArticlesInput!): ArticleConnection!
  tags(input: TagsInput!): TagConnection!
  reports(input: ReportsInput!): ReportConnection!
  report(input: ReportInput!): Report!
  today(input: ConnectionArgs!): ArticleConnection!
}

type PageInfo {
  startCursor: String
  endCursor: String
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
}

input PinCommentInput {
  id: ID!
}

type Placements {
  webAsideTop: PlacementUnit!
  appSplash: PlacementUnit!
  appInStreamTop: PlacementUnit!
  appInStreamMiddle: PlacementUnit!
  appInStreamBottom: PlacementUnit!
  appInvitationTop: PlacementUnit!
}

type PlacementUnit {
  image: URL!
  link: URL!
  adLabel: Boolean!
}

enum PlatformType {
  ios
  android
}

scalar PositiveFloat

scalar PositiveInt

input PublishArticleInput {
  id: ID!
  delay: Int
}

"""Enums for publishing state."""
enum PublishState {
  unpublished
  pending
  error
  published
}

input PutAudiodraftInput {
  id: ID
  audioAssetId: ID
  title: String
  length: Int
}

input PutCommentInput {
  comment: CommentInput!
  id: ID
}

input PutDraftInput {
  id: ID
  title: String
  content: String
  tags: [String]
  coverAssetId: ID
  collection: [ID]
}

input PutRemarkInput {
  id: ID!
  remark: String!
  type: RemarkTypes!
}

type Query {
  article(input: ArticleInput!): Article
  node(input: NodeInput!): Node
  frequentSearch(input: FrequentSearchInput!): [String!]
  search(input: SearchInput!): SearchResultConnection!
  official: Official!
  oss: OSS!
  viewer: User
  user(input: UserInput!): User
}

input ReadArticleInput {
  id: ID!
}

type ReadHistory {
  article: Article!
  readAt: DateTime!
}

type ReadHistoryConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [ReadHistoryEdge!]
}

type ReadHistoryEdge {
  cursor: String!
  node: ReadHistory!
}

input RecallPublishInput {
  id: ID!
}

type RecentSearchConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [RecentSearchEdge!]
}

type RecentSearchEdge {
  cursor: String!
  node: String!
}

type Recommendation {
  """Articles published by user's followees."""
  followeeArticles(input: ConnectionArgs!): ArticleConnection!

  """Global articles sort by publish time."""
  newest(input: ConnectionArgs!): ArticleConnection!

  """Global articles sort by latest activity time."""
  hottest(input: ConnectionArgs!): ArticleConnection!

  """'Matters Today' recommendation."""
  today: Article

  """'In case you missed it' recommendation."""
  icymi(input: ConnectionArgs!): ArticleConnection!

  """Global tag list, sort by activities in recent 14 days."""
  tags(input: ConnectionArgs!): TagConnection!

  """Gloabl article list, sort by activities in recent 72 hours."""
  topics(input: ConnectionArgs!): ArticleConnection!

  """Global user list, sort by activities in recent 6 month."""
  authors(input: AuthorsInput!): UserConnection!
}

"""Enums for types of recommend articles."""
enum RecommendTypes {
  today
  icymi
  hottest
  newest
}

type Release {
  title: String
  description: String
  cover: URL
  link: URL
  platform: PlatformType!
  channel: ChannelType!
  version: String!
  latest: Boolean!
  forceUpdate: Boolean!
  releasedAt: DateTime!
}

input ReleasesInput {
  platform: PlatformType!
  channel: ChannelType!
  first: Int
}

enum RemarkTypes {
  Article
  User
  Tag
  Comment
  Report
  Feedback
}

input RenameTagInput {
  id: ID!
  content: String!
}

type Report {
  id: ID!
  user: User
  article: Article
  comment: Comment
  category: String!
  description: String
  assets: [URL!]
  contact: String
  createdAt: DateTime!
  remark: String
}

input ReportArticleInput {
  id: ID!
  category: ID!
  description: String!
  assetIds: [ID!]
  contact: String
}

input ReportCommentInput {
  id: ID!
  category: ID!
  description: String!
  assetIds: [ID!]
  contact: String
}

type ReportConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [ReportEdge!]
}

type ReportEdge {
  cursor: String!
  node: Report!
}

input ReportInput {
  id: ID!
}

input ReportsInput {
  article: Boolean!
  comment: Boolean!
  after: String
  first: Int
}

input ResetPasswordInput {
  password: String!
  codeId: ID!
}

union Response = Article | Comment

type ResponseConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [ResponseEdge!]
}

type ResponseEdge {
  cursor: String!
  node: Response!
}

input ResponsesInput {
  sort: ResponseSort
  after: String
  before: String
  includeAfter: Boolean
  includeBefore: Boolean
  first: Int
  articleOnly: Boolean
}

"""Enums for sorting responses."""
enum ResponseSort {
  oldest
  newest
}

"""Enums for user roles."""
enum Role {
  vistor
  user
  admin
}

input SearchInput {
  key: String!
  type: SearchTypes!
  after: String
  first: Int
  oss: Boolean
}

type SearchResultConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [SearchResultEdge!]
}

type SearchResultEdge {
  cursor: String!
  node: Node!
}

enum SearchTypes {
  Article
  User
  Tag
}

input SendVerificationCodeInput {
  email: Email!
  type: VerificationCodeType!
}

input SetBoostInput {
  id: ID!
  boost: NonNegativeFloat!
  type: BoostTypes!
}

input SetCollectionInput {
  id: ID!
  collection: [ID!]!
}

input SingleFileDeleteInput {
  id: ID!
}

input SingleFileUploadInput {
  type: AssetType!
  file: Upload
  url: URL
  entityType: EntityType!
  entityId: ID
}

input SubscribeArticleInput {
  id: ID!
}

"""
This notice type contains info about current user's subscribed article has new comment.
"""
type SubscribedArticleNewCommentNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """The user who made new comment to current user's subscribed article."""
  actors: [User]

  """The article that current user has been subscribed."""
  target: Article

  """The comment data."""
  comment: Comment
}

type Subscription {
  nodeEdited(input: NodeEditedInput!): Node!
}

"""This type contains content, count and related data of an article tag."""
type Tag implements Node {
  """Unique id of this tag."""
  id: ID!

  """Content of this tag."""
  content: String!
  count: Int! @deprecated(reason: "Use `articles.totalCount`.")

  """List of how many articles were attached with this tag."""
  articles(input: ConnectionArgs!): ArticleConnection!

  """Time of this tag was created."""
  createdAt: DateTime!

  """OSS"""
  oss: TagOSS!
  remark: String
}

type TagConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [TagEdge!]
}

type TagEdge {
  cursor: String!
  node: Tag!
}

type TagOSS {
  boost: NonNegativeFloat!
  score: NonNegativeFloat!
}

input TagsInput {
  after: String
  first: Int
  sort: TagsSort
}

"""Enums for sorting tags."""
enum TagsSort {
  newest
  oldest
  hottest
}

scalar Time

input ToggleArticleLiveInput {
  id: ID!
  enabled: Boolean!
}

input ToggleArticlePublicInput {
  id: ID!
  enabled: Boolean!
}

input ToggleArticleRecommendInput {
  id: ID!
  enabled: Boolean!
  type: RecommendTypes!
}

type Transaction {
  delta: Int!
  purpose: TransactionPurpose!
  content: String!
  createdAt: DateTime!
}

type TransactionConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [TransactionEdge!]
}

type TransactionEdge {
  cursor: String!
  node: Transaction!
}

enum TransactionPurpose {
  appreciate
  appreciateComment
  appreciateSubsidy
  invitationAccepted
  joinByInvitation
  joinByTask
  firstPost
  systemSubsidy
}

input UnfollowUserInput {
  id: ID!
}

input UnpinCommentInput {
  id: ID!
}

input UnsubscribeArticleInput {
  id: ID!
}

input UnvoteCommentInput {
  id: ID!
}

input UpdateArticleInfoInput {
  id: ID!
  sticky: Boolean
}

input UpdateArticleStateInput {
  id: ID!
  state: ArticleState!
}

input UpdateCommentStateInput {
  id: ID!
  state: CommentState!
}

input UpdateMattersTodayInput {
  id: ID!
  cover: String
  title: String
  summary: String
}

input UpdateNotificationSettingInput {
  type: NotificationSettingType!
  enabled: Boolean!
}

input UpdateUserInfoInput {
  displayName: String
  userName: String
  avatar: ID
  description: String
  language: UserLanguage
  agreeOn: Boolean
  profileCover: ID
}

input UpdateUserStateInput {
  id: ID!
  state: UserState!
  banDays: PositiveInt
}

scalar Upload

type UpstreamArticleArchivedNotice implements Notice {
  id: ID!
  unread: Boolean!
  createdAt: DateTime!
  upstream: Article
  target: Article
}

scalar URL

type User implements Node {
  """Global id of an user."""
  id: ID!

  """UUID of an user, for backward compatibility."""
  uuid: UUID!

  """Global unique user name of a user."""
  userName: String

  """Display name on user profile, can be duplicated."""
  displayName: String

  """LikerID of LikeCoin"""
  likerId: String

  """URL for user avatar."""
  avatar: URL

  """User information."""
  info: UserInfo!

  """User settings."""
  settings: UserSettings!

  """Article recommendations for current user."""
  recommendation: Recommendation!

  """Articles authored by current user."""
  articles(input: ConnectionArgs!): ArticleConnection!

  """Drafts authored by current user."""
  drafts(input: ConnectionArgs!): DraftConnection!

  """Audiodraft by user, currently not used."""
  audiodrafts(input: ConnectionArgs!): AudiodraftConnection!

  """Articles current user commented on"""
  commentedArticles(input: ConnectionArgs!): ArticleConnection!

  """Artilces current user subscribed to."""
  subscriptions(input: ConnectionArgs!): ArticleConnection!

  """Record of user activity, only accessable by current user."""
  activity: UserActivity!

  """Followers of this user."""
  followers(input: ConnectionArgs!): UserConnection!

  """Users that this user follows."""
  followees(input: ConnectionArgs!): UserConnection!

  """Whether current user is following viewer."""
  isFollower: Boolean!

  """Whether viewer is following current user."""
  isFollowee: Boolean!

  """Status of current user."""
  status: UserStatus

  """OSS"""
  oss: UserOSS!
  remark: String
  notices(input: ConnectionArgs!): NoticeConnection!
}

type UserActivity {
  """User reading history."""
  history(input: ConnectionArgs!): ReadHistoryConnection!

  """User search history."""
  recentSearches(input: ConnectionArgs!): RecentSearchConnection!
}

type UserConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  edges: [UserEdge!]
}

type UserEdge {
  cursor: String!
  node: User!
}

type UserInfo {
  """Timestamp of registration."""
  createdAt: DateTime!

  """Unique user name."""
  userName: String! @deprecated(reason: "Use `User.userName`.")

  """Is user name editable."""
  userNameEditable: Boolean!

  """Display name on profile."""
  displayName: String! @deprecated(reason: "Use `User.displayName`.")

  """User desciption."""
  description: String

  """URL for avatar."""
  avatar: URL @deprecated(reason: "Use `User.avatar`.")

  """User email."""
  email: Email

  """Is email verified."""
  emailVerified: Boolean

  """Moble number."""
  mobile: String

  """User reading speed, 500 as default."""
  readSpeed: Int!

  """User badges."""
  badges: [Badge!]

  """Timestamp of user agreement."""
  agreeOn: DateTime

  """Number of total written words."""
  totalWordCount: Int! @deprecated(reason: "Use `User.status.totalWordCount`.")

  """Cover of profile page."""
  profileCover: URL
}

enum UserInfoFields {
  displayName
  avatar
  description
  email
  mobile
  agreeOn
}

input UserInput {
  userName: String!
}

enum UserLanguage {
  en
  zh_hans
  zh_hant
}

input UserLoginInput {
  email: Email!
  password: String!
}

"""This notice type contains info about current user has new followers."""
type UserNewFollowerNotice implements Notice {
  """Unique ID of this notice."""
  id: ID!

  """The value determines if the notice is unread or not."""
  unread: Boolean!

  """Time of this notice was created."""
  createdAt: DateTime!

  """List of new followers."""
  actors: [User]
}

type UserOSS {
  boost: NonNegativeFloat!
  score: NonNegativeFloat!
}

input UserRegisterInput {
  email: Email!
  userName: String
  displayName: String!
  password: String!
  description: String
  codeId: ID!
}

enum UserRole {
  user
  admin
}

type UserSettings {
  """User language setting."""
  language: UserLanguage!

  """Notification settings."""
  notification: NotificationSetting!
}

enum UserState {
  active
  onboarding
  banned
  frozen
  archived
}

type UserStatus {
  """User state."""
  state: UserState!

  """User role and access level."""
  role: UserRole!

  """Total MAT left in wallet."""
  MAT: MAT!

  """Invitation. Deprecated."""
  invitation: InvitationStatus @deprecated(reason: "removed")

  """Number of articles published by user"""
  articleCount: Int!

  """Number of views on user articles. Not yet in use."""
  viewCount: Int!

  """Number of draft of user."""
  draftCount: Int! @deprecated(reason: "Use `User.drafts.totalCount`.")

  """Number of comments posted by user."""
  commentCount: Int!
  subscriptionCount: Int! @deprecated(reason: "Use `User.subscriptions.totalCount`.")
  followeeCount: Int! @deprecated(reason: "Use `User.followees.totalCount`.")
  followerCount: Int! @deprecated(reason: "Use `User.followers.totalCount`.")

  """Number of unread notices."""
  unreadNoticeCount: Int!

  """Whether there are unread articles from followees."""
  unreadFolloweeArticles: Boolean!

  """Whether user has read response info or not."""
  unreadResponseInfoPopUp: Boolean!

  """Number of total written words."""
  totalWordCount: Int!
}

scalar UUID

enum VerificationCodeType {
  register
  email_reset
  email_reset_confirm
  password_reset
  email_verify
}

input VerifyEmailInput {
  codeId: ID!
}

"""Enums for vote types."""
enum Vote {
  up
  down
}

input VoteCommentInput {
  vote: Vote!
  id: ID!
}
